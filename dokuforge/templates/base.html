{% macro button(action, label, params={}) -%}
<form action="{{ action|e }}" method="post" class="button">
	{%- for key, value in params.items() -%}
	<input type="hidden" name="{{ key|e }}" value="{{ value|e }}">
	{%- endfor -%}
	<input type="submit" name="submit" value="{{ label|e }}">
</form>
{%- endmacro -%}

{%- macro navbar(entries) -%}
Navigation: <a href="{{ buildurl("index")|e }}">DokuForge</a>
{%- for (point, args, title) in entries -%}
{%- if url == '' -%}
{# comment to protect space #} &gt; {{ title|e}}
{%- else -%}
{# comment to protect space #} &gt; <a href="{{ buildurl(point, args)|e }}">{{ title|e }}</a>
{%- endif -%}
{%- endfor -%}
{%- endmacro -%}

{%- macro threeway(ok, default, success, errormessage, errorexplanation) -%}
{% if ok is none %}
{{ default|e }}
{% elif ok %}
{{ success|e }}
{% else %}
<span class=important>{{ errormessage|e }}</span><br>
{{ errorexplanation|e }}
{% endif %}
{%- endmacro -%}

<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN">
<html lang="de">
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
	<link rel="stylesheet" type="text/css" href="{{ staticjoin("style.css")|e }}" media="all">
	<link rel="stylesheet" type="text/css" href="{{ staticjoin("bootstrap.min.css")|e }}" media="all">
	<link rel="stylesheet" type="text/css" href="{{ staticjoin("print.css")|e }}" media="print">
	<title>DokuForge2</title>
<script type="text/javascript">
function checkMathCookie()
{
  var i,x,y,ARRcookies = document.cookie.split(";");
  for (i = 0; i < ARRcookies.length; i++) {
    x = ARRcookies[i].substr(0,ARRcookies[i].indexOf("="));
    y = ARRcookies[i].substr(ARRcookies[i].indexOf("=")+1);
    x = x.replace(/^\s+|\s+$/g,"");
    if (x == "wants_mathjax") {
      if (y== "True") {
        return true
      } else {
	return false
      }
    }
  }
  disableMathCookie()
  return true
}
function enableMathCookie()
{
  document.cookie="wants_mathjax=True; path=/;"
}
function disableMathCookie()
{
  document.cookie="wants_mathjax=False; path=/;"
}
</script>
<script type="text/javascript">
if (checkMathCookie() == true){
  var mathjax_include = document.createElement("script");
  mathjax_include.type = "text/javascript"
  mathjax_include.src = "{{ mathjaxjoin("MathJax.js?config=TeX-AMS-MML_HTMLorMML") }}"
  document.getElementsByTagName("head")[0].appendChild(mathjax_include)
}
</script>
{% block mathjax %}
<script type="text/x-mathjax-config">
  MathJax.Hub.Config({
      tex2jax: {
          inlineMath: [['$','$']],
          displayMath: [['$$','$$']]
      },
      TeX: {
          Macros: {
              newcommand: '{nonewcommand}',
              renewcommand: '{norenewcommand}',
              def: '{nodef}',
              let: '{nolet}',
          }
      }
  });
</script>
{% endblock %}
</head>
<body class="df2-body" onload="checkMathCookie()">
    <header class="navbar" id="header">
        {%- block header %}
            <div class="container-fluid">
                <h1 id="dokuforgetitle">
                    {%- block subheading %}{% endblock -%}
                </h1>
                <div>
                    {% if user is not none %}
                        Hallo {{ user.name|e }}!
                        {{ button(buildurl("logout"), "Logout") }}
                    {%- endif %}
                </div>
            </div>
            <nav class="container-fluid">
                <div id="location">
                    {%- block location %}{% endblock -%}
                </div>
                <div class="userinfo" id="userinformation">
                    <div class="userlinks">
                        {% if user is not none %}
                            {%- if allowMathChange %}
                                <script type="text/javascript">
                                    if (checkMathCookie() == true) {
                                        document.write('<a href="" onClick="disableMathCookie()">Formelvorschau ausschalten</a>')
                                    } else {
                                        document.write('<a href="" onClick="enableMathCookie()">Formelvorschau einschalten</a>')
                                    }
                                </script>
                                <noscript>
                                    Formelvorschau ist aus
                                </noscript>
                            {% else %}
                                <script type="text/javascript">
                                    if (checkMathCookie() == true) {
                                        document.write('Formelvorschau ist an')
                                    } else {
                                        document.write('Formelvorschau ist aus')
                                    }
                                </script>
                                <noscript>
                                    Formelvorschau ist aus
                                </noscript>
                            {% endif -%}
                        {% endif %}
                        <a href="{{ buildurl("styleguide")|e }}">So geht's</a>
                    </div>
                </div>
            </nav>
        {% endblock -%}
    </header>
    <div class="container-fluid" id="content">
        {%- block content %}
            Dies sollte nicht sichtbar sein.
        {% endblock %}
    </div>
    <footer id="footer" class="container-fluid">
        {%- block footer %}
            {% if user is none %}
                Kontakt: team (at) dokuforge.de<br>
            {% else %}
                Kontakt: <a href="mailto:team@dokuforge.de">team@dokuforge.de</a>
                <br>
            {% endif %}
            DokuForge â€“ Ein Projekt des CdE e.V.
        {% endblock -%}
    </footer>
</body>
<!-- DokuForge revision is {{ commitid }}. -->
</html>
{# vim:syntax=jinja
#}
